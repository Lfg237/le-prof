<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bibliothèque Numérique</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin:0; padding:0;
  background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #a1c4fd, #c2e9fb);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  color: #fff;
}
@keyframes gradientBG {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
header {background: rgba(0,0,0,0.6); padding: 10px; display:flex; flex-direction:column; gap:5px; position: sticky; top:0; z-index:1000;}
nav {display:flex; justify-content:space-between; align-items:center;}
nav a {margin:0 10px; color:#fff; text-decoration:none; font-weight:bold;}
.clock {font-weight:bold;}
.user-info {display:flex; justify-content:space-between; align-items:center;}
.status-btn {padding:5px 10px; border:none; border-radius:5px; font-weight:bold; color:#fff;}
.status-ferme {background:gray;}
.status-simple {background:green;}
.status-premium {background:deepskyblue;}
.status-admin {background:orange;}
.banner {background: rgba(0,0,0,0.6); overflow:hidden; white-space: nowrap; padding:5px 0;}
.banner span {display: inline-block; padding-left:100%; animation: scrollBanner 15s linear infinite;}
@keyframes scrollBanner {0% {transform: translateX(0);} 100% {transform: translateX(-100%);}}
main {padding:20px;}
.books {display:grid; grid-template-columns: repeat(auto-fit,minmax(150px,1fr)); gap:20px;}
.book {background: rgba(0,0,0,0.5); padding:10px; border-radius:10px; cursor:pointer; transition: transform 0.3s;}
.book:hover {transform: scale(1.05);}
.pages {margin-top:10px; display:none;}
.page {background: rgba(255,255,255,0.9); color:#000; padding:15px; margin:5px 0; border-radius:8px; cursor:pointer; transition: background 0.3s;}
.page:hover {background:#e0e0e0;}
.popup-bg {position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.7); display:none; justify-content:center; align-items:center; z-index:2000;}
.popup {background:#fff; color:#000; padding:20px; border-radius:10px; max-width:300px; text-align:center;}
.admin-table {width:100%; border-collapse:collapse; margin-top:20px; display:none;}
.admin-table th, .admin-table td {border:1px solid #fff; padding:8px;}
.admin-table th {background:rgba(255,255,255,0.2);}
</style>
</head>
<body>

<header>
  <nav>
    <div class="logo">📚 Bibliothèque Numérique</div>
    <div>
      <a href="#books">Livres</a>
      <a href="#admin">Admin</a>
    </div>
    <div class="clock" id="clock"></div>
  </nav>
  <div class="user-info">
    <div>ID : <span id="userId"></span></div>
    <div>Statut : <button class="status-btn" id="userStatus"></button></div>
    <div>Livre sélectionné : <span id="selectedBook">Aucun</span></div>
  </div>
</header>

<div class="banner">
  <span>🎉 Préparez vos examens et concours ! Nouvelle offre premium disponible ! Contactez l'admin. 🎉</span>
</div>

<main>
  <section id="books">
    <h2>Nos Livres</h2>
    <div class="books" id="booksContainer"></div>
  </section>

  <section id="admin">
    <h2>Tableau Administrateur</h2>
    <button onclick="adminLogin()">Accéder</button>
    <table class="admin-table" id="adminTable">
      <thead>
        <tr>
          <th>ID Utilisateur</th>
          <th>Type</th>
          <th>Date Début</th>
          <th>Date Fin</th>
          <th>Livres Autorisés</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>
</main>

<div class="popup-bg" id="popupBg">
  <div class="popup" id="popupContent">
    <p>Accès réservé aux abonnés !</p>
    <p>Prix : 500 FCFA / Contact : admin@example.com</p>
    <button onclick="closePopup()">Fermer</button>
  </div>
</div>

<script>
// --- Horloge ---
function updateClock() {
  const now = new Date();
  document.getElementById('clock').textContent =
    now.toLocaleDateString('fr-FR') + ' ' + now.toLocaleTimeString('fr-FR');
}
setInterval(updateClock,1000);
updateClock();

// --- Livres ---
const booksData = [
  {
    id: 0,
    title: 'Livre 1',
    pages: [
      `⭐ Bienvenue dans le Livre 1 🎉📚`,
      `📖 Exemple de page 2 du Livre 1`,
      `🔗 Ressource : <a href='https://example.com' target='_blank'>Clique ici 🌐</a>`
    ]
  },
  {
    id: 1,
    title: 'Livre 2',
    pages: [
      `⭐ Bienvenue dans le Livre 2 🎉📚`,
      `📖 Exemple de page 2 du Livre 2`,
      `🔗 Ressource : <a href='https://example.com' target='_blank'>Clique ici 🌐</a>`
    ]
  },
  {
    id: 2,
    title: 'terminal general',
    pages: [
      `⭐ exercice de maths 

Exercice : Dérivées et fonctions

Soit la fonction  définie sur  par :

f(x) = x^3 - 6x^2 + 9x + 1

1. Calculer la dérivée .


2. Étudier le signe de  et en déduire les intervalles de croissance et de décroissance de .
3. Déterminer les points critiques et les extrema de la fonction.
Solution

1. Dérivée :
f'(x) = 3x^2 - 12x + 9
2. Étude du signe :
On résout  :
3x^2 - 12x + 9 = 0 \implies x^2 - 4x + 3 = 0

(x-1)(x-3) = 0 \implies x = 1 \text{ ou } x = 3 

Pour ,  →  croissante.

Pour ,  →  décroissante.
Pour ,  →  croissante.
3. Points critiques et extrema :
 : maximum local → 

 : minimum local → 


Conclusion :

La fonction est croissante sur 

Elle est décroissante sur 

Maximum local : 

Minimum local : 

🎉📚`,
      `📖 Exemple de page 2 du Livre 3`,
      `🔗 Ressource : <a href='https://maths-pdf.fr/exercices-de-maths-terminale🌐</a>`
    ]
  },
  {
    id: 3,
    title: 'premiere',
    pages: [
      `⭐ Parfait ! Voici un exercice de maths 

Exercice : Étude de fonction et équation

Soit la fonction  définie sur  par :

f(x) = x^2 - 4x + 3

1. Déterminer la dérivée .


2. Étudier le sens de variation de .


3. Résoudre .


4. Déterminer les coordonnées du minimum de .

Solution

1. Dérivée :



f'(x) = 2x - 4

2. Étude du sens de variation :



On résout  :


2x - 4 = 0 \implies x = 2

Pour ,  →  croissante


Donc  décroît sur  et croît sur .

3. Résolution de  :



x^2 - 4x + 3 = 0 \implies (x-1)(x-3) = 0 \implies x = 1 \text{ ou } x = 3

4. Minimum de  :



Minimum atteint en  :


f(2) = 2^2 - 4\cdot 2 + 3 = 4 - 8 + 3 = -1

Conclusion :

Variations : décroissante sur , croissante sur 

Zéros :  et 

Minimum : 
🎉📚`,
      `📖 rcemplr 4`,
      `🔗 Ressource : <a href='https://example.com' target='_blank'>Clique ici 🌐</a>`
    ]
  },
  {
    id: 4,
    title: '2nd',
    pages: [
      `⭐ Parfait ! Voici un exercice de maths pour la classe de Seconde avec son corrigé :

Exercice : Proportionnalité et pourcentages

Une entreprise fabrique des stylos.

En janvier, elle produit 240 stylos.

En février, la production augmente de 25 %.

En mars, elle augmente encore de 20 % par rapport à février.


1. Calculer le nombre de stylos produits en février.


2. Calculer le nombre de stylos produits en mars.


3. Déterminer l’augmentation totale de la production entre janvier et mars en pourcentage.




---

Solution

1. Production en février :



240 + 25\% \times 240 = 240 + 60 = 300 \text{ stylos}

2. Production en mars :



300 + 20\% \times 300 = 300 + 60 = 360 \text{ stylos}

3. Augmentation totale entre janvier et mars :



\text{Augmentation} = 360 - 240 = 120

\text{Pourcentage} = \frac{120}{240} \times 100 = 50% 

Conclusion :

Février : 300 stylos

Mars : 360 stylos

Augmentation totale : 50 %
🎉📚`,
      `📖 Exemple de page 2 du Livre 5`,
      `🔗 Ressource : <a href='https://example.com' target='_blank'>Clique ici 🌐</a>`
    ]
  },
  {
    id: 5,
    title: '3EM',
    pages: [
      `⭐ Parfait ! Voici un exercice de maths pour la classe de 3ᵉ avec son corrigé :

Exercice : Équations et problèmes

Un magasin vend des cahiers à 2 € l’unité et des stylos à 1,50 € l’unité.
Une cliente achète 5 cahiers et un certain nombre de stylos.
Elle dépense au total 17 €.

1. Écrire une équation pour déterminer le nombre de stylos achetés.
2. Résoudre cette équation.
3. Vérifier le résultat.

Solution

1. Équation :
Soit  le nombre de stylos achetés.
2 \times 5 + 1.5 \times x = 17

10 + 1.5x = 17 

2. Résolution :



1.5x = 17 - 10 = 7

x = \frac{7}{1.5} = \frac{7 \times 2}{3} = \frac{14}{3} \approx 4,67 

Comme on ne peut pas acheter un tiers de stylo, on arrondit au nombre entier le plus proche compatible avec le total exact :

Vérification : si  → total = 10 + 6 = 16 € (trop peu)

Si  → total = 10 + 7,5 = 17,5 € (trop)
✅ 

🎉📚`,
      `📖 Exemple de page 2 du Livre 6`,
      `🔗 Ressource : <a href='https://example.com' target='_blank'>Clique ici 🌐</a>`
    ]
  },
  {
    id: 6,
    title: 'Livre 7',
    pages: [
      `⭐ Bienvenue dans le Livre 7 🎉📚`,
      `📖 Exemple de page 2 du Livre 7`,
      `🔗 Ressource : <a href='https://example.com' target='_blank'>Clique ici 🌐</a>`
    ]
  },
  {
    id: 7,
    title: 'Livre 8',
    pages: [
      `⭐ Bienvenue dans le Livre 8 🎉📚`,
      `📖 Exemple de page 2 du Livre 8`,
      `🔗 Ressource : <a href='https://example.com' target='_blank'>Clique ici 🌐</a>`
    ]
  },
  {
    id: 8,
    title: 'Livre 9',
    pages: [
      `⭐ Bienvenue dans le Livre 9 🎉📚`,
      `📖 Exemple de page 2 du Livre 9`,
      `🔗 Ressource : <a href='https://example.com' target='_blank'>Clique ici 🌐</a>`
    ]
  },
  {
    id: 9,
    title: 'Livre 10',
    pages: [
      `⭐ Bienvenue dans le Livre 10 🎉📚`,
      `📖 Exemple de page 2 du Livre 10`,
      `🔗 Ressource : <a href='https://example.com' target='_blank'>Clique ici 🌐</a>`
    ]
  }
];

// --- Utilisateurs ---
let users = [
  {id:'U1001',type:'premium',start:'01/09/2025',end:'30/09/2025',books:[0,1,2]},
  {id:'U1002',type:'simple',start:'01/09/2025',end:'30/09/2025',books:[0,1]},
  {id:'U1003',type:'ferme',start:'01/09/2025',end:'30/09/2025',books:[]},
  {id:'U1000',type:'admin',start:'01/01/2025',end:'31/12/2030',books:[...Array(40).keys()]}
];

// --- Utilisateur connecté ---
let currentUser = users[0];
document.getElementById('userId').textContent = currentUser.id;

// --- Statut utilisateur ---
function updateStatusButton(){
  const btn = document.getElementById('userStatus');
  btn.textContent = currentUser.type.toUpperCase();
  btn.className = 'status-btn ' +
    (currentUser.type==='ferme'?'status-ferme':currentUser.type==='simple'?'status-simple':currentUser.type==='premium'?'status-premium':'status-admin');
}
updateStatusButton();

function updateUserStatus(){
  const today = new Date();
  const start = new Date(currentUser.start.split('/').reverse().join('-'));
  const end = new Date(currentUser.end.split('/').reverse().join('-'));
  if(currentUser.type!=='admin'){
    if(today<start || today>end) currentUser.type='ferme';
  }
  updateStatusButton();
}
updateUserStatus();

// --- Vérification accès selon abonnement ---
function canAccessBook(user, bookId){
  switch(user.type){
    case 'admin': return true;
    case 'premium': return true;
    case 'simple': return user.books.includes(bookId);
    case 'ferme': return false;
    default: return false;
  }
}

// --- Génération des livres ---
const booksContainer = document.getElementById('booksContainer');
booksData.forEach(book=>{
  const bookDiv = document.createElement('div');
  bookDiv.className='book';
  bookDiv.dataset.bookId=book.id;
  bookDiv.innerHTML = `<h3>${book.title}</h3><div class="pages"></div>`;
  booksContainer.appendChild(bookDiv);

  const pagesDiv = bookDiv.querySelector('.pages');
  book.pages.forEach((p,pageIndex)=>{
    const pageEl = document.createElement('div');
    pageEl.className='page';
    pageEl.innerHTML = p;
    pageEl.querySelectorAll('a').forEach(a=>a.setAttribute('target','_blank'));
    pageEl.onclick = (e)=>{
      e.stopPropagation();
      if(canAccessBook(currentUser,book.id)){
        alert(p);
      } else showPopup();
    };
    pagesDiv.appendChild(pageEl);
  });

  bookDiv.onclick = ()=>{
    document.getElementById('selectedBook').textContent = book.title;
    pagesDiv.style.display = pagesDiv.style.display==='block'?'none':'block';
    if(!canAccessBook(currentUser,book.id)) showPopup();
  };
});

// --- Popup ---
function showPopup(){document.getElementById('popupBg').style.display='flex';}
function closePopup(){document.getElementById('popupBg').style.display='none';}

// --- Tableau Admin ---
const adminPassword = "233233";
function adminLogin(){
  const code = prompt("Entrez le code d'accès administrateur :");
  if(code===adminPassword){
    const tbody = document.getElementById('adminTable').querySelector('tbody');
    tbody.innerHTML = '';
    users.forEach(u=>{
      const tr = document.createElement('tr');
      tr.innerHTML=`<td>${u.id}</td>
                    <td>${u.type}</td>
                    <td>${u.start}</td>
                    <td>${u.end}</td>
                    <td>${u.books.map(b=>booksData[b]?.title||'').join(', ')}</td>`;
      tbody.appendChild(tr);
    });
    document.getElementById('adminTable').style.display='table';
  } else {
    alert('Code incorrect !');
  }
}
</script>

</body>
</html>